<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SimuladorJR - Configuración</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="icon" type="image/png" sizes="16x16" href="../src/icon.png" />
  <style>
    body {
      font-family: 'Inter', 'Noto Sans', sans-serif;
      background: white;
    }
    header {
      border-bottom: 1px solid #f0f2f5;
      padding: 1rem 4rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h2 {
      font-weight: 700;
      font-size: 1.25rem;
      color: #111518;
    }
    nav a {
      margin-left: 1.5rem;
      color: #111518;
      font-weight: 500;
      text-decoration: none;
    }
    nav a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <header>
    <div class="d-flex align-items-center gap-3">
      <img src="../src/icon2.svg" alt="Logo" width="40" height="40" />
      <h2>SimuladorJR</h2>
    </div>
    <nav>
      <a href="index.html">Inicio</a>
      <a href="simsettings.html">Simulación</a>
      <a href="result.html">Análisis</a>
      <a href="#" id="ayuda-link">Ayuda</a>
    </nav>
  </header>

  <!-- Modal Ayuda -->
  <div class="modal fade" id="modalAyuda" tabindex="-1" aria-labelledby="modalAyudaLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content p-4">
        <h5 class="modal-title mb-3" id="modalAyudaLabel">Ayuda</h5>
        <button class="btn btn-outline-primary mb-2 w-100" onclick="window.location.href='impact.html'">Impacto</button>
        <button class="btn btn-outline-primary mb-3 w-100" onclick="window.location.href='marco.html'">Marco Referencial</button>
        <button class="btn btn-outline-primary mb-3 w-100" onclick="window.location.href='help.html'">Variables</button>
        <button type="button" class="btn btn-link" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>

  <main class="container my-5" style="max-width: 720px;">
    <h1 class="mb-4 fw-bold" style="color:#111518;">Configuración de Simulación</h1>
    <p class="text-secondary mb-5">Ajusta las variables principales del sistema para simular el tráfico urbano.</p>
    <form id="simForm" class="row g-4">
      <div class="col-md-6">
        <label class="form-label fw-bold text-dark">Duración de Semáforo en Verde (segundos)</label>
        <input type="number" class="form-control" id="verde" min="0" value="30" required />
      </div>
      <div class="col-md-6">
        <label class="form-label fw-bold text-dark">Duración de Semáforo en Amarillo (segundos)</label>
        <input type="number" class="form-control" id="amarillo" min="0" value="5" required />
      </div>
      <div class="col-md-6">
        <label class="form-label fw-bold text-dark">Duración de Todos en Rojo (segundos)</label>
        <input type="number" class="form-control" id="rojo" min="0" value="60" required />
      </div>
      <div class="col-md-6">
        <label class="form-label fw-bold text-dark">Densidad de Tráfico (vehículos por hora)</label>
        <input type="number" class="form-control" id="densidad" min="0" value="50" required />
      </div>
      <div class="col-md-6">
        <label class="form-label fw-bold text-dark">Límite de Velocidad (km/h)</label>
        <input type="number" class="form-control" id="velocidad" min="0" value="80" required />
      </div>
      <div class="col-md-6">
        <label class="form-label fw-bold text-dark">Número de Carriles por Dirección</label>
        <input type="number" class="form-control" id="carriles" min="1" value="2" required />
      </div>
      <div class="col-md-12">
        <label for="interseccion" class="form-label fw-bold text-dark">Tipo de Intersección</label>
        <select class="form-select" id="interseccion" required>
          <option value="t">Tipo T</option>
          <option value="cruce">Cruce</option>
          <option value="y">Tipo Y</option>
          <option value="rotonda">Rotonda</option>
        </select>
      </div>
      <div class="col-12 text-end">
        <button type="submit" class="btn btn-primary px-4">Simular</button>
      </div>
    </form>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById('ayuda-link').addEventListener('click', e => {
      e.preventDefault();
      const modal = new bootstrap.Modal(document.getElementById('modalAyuda'));
      modal.show();
    });

    document.getElementById('simForm').addEventListener('submit', e => {
      e.preventDefault();

      const data = {
        verde: Number(document.getElementById('verde').value),
        amarillo: Number(document.getElementById('amarillo').value),
        rojo: Number(document.getElementById('rojo').value),
        densidad: Number(document.getElementById('densidad').value),
        velocidad: Number(document.getElementById('velocidad').value),
        carriles: Number(document.getElementById('carriles').value),
        interseccion: document.getElementById('interseccion').value,
      };

      localStorage.setItem('simData', JSON.stringify(data));
      window.location.href = 'result.html';
    });
  </script>
</body>
</html>
